<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared PCX Assets</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons (Copy) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        /* Custom scrollbar styling for aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #F38020; /* CF Orange */
            border-radius: 4px;
        }
        .section-padding {
            padding: 4rem 1rem;
        }
        @media (min-width: 768px) {
            .section-padding {
                padding: 6rem 4rem;
            }
        }
        /* Modal Backdrop */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        /* Custom Gradient Class for Hero Section */
        .lava-gradient {
            background: linear-gradient(135deg, #FF6633 0%, #F6821F 50%, #FBAD41 100%);
        }
    </style>
    <!-- Tailwind Configuration for Cloudflare colors and Dark Mode -->
    <script>
        tailwind.config = {
            darkMode: 'class', // Enable dark mode based on 'dark' class on HTML tag
            theme: {
                extend: {
                    colors: {
                        'cf-orange': '#F38020', // Primary Cloudflare-like orange
                        'cf-light': '#FFF8F4',  // Very light off-white/orange tint
                    }
                }
            }
        }
    </script>
</head>
<!-- Initial script to apply dark class on load based on user preference -->
<script>
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
</script>

<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300">

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo/Title -->
                <div class="flex-shrink-0">
                    <span class="text-2xl font-extrabold text-cf-orange tracking-tight">PCX Content Strategy</span>
                    <span class="text-gray-500 dark:text-gray-400 text-sm font-medium ml-2 hidden sm:inline">Shared Assets</span>
                </div>
                <!-- Navigation Links and Dark Mode Toggle -->
                <nav class="flex items-center space-x-4">
                    <a href="#content" class="text-gray-600 dark:text-gray-300 hover:text-cf-orange transition duration-150 font-medium">Prompts</a>
                    <a href="#video" class="text-gray-600 dark:text-gray-300 hover:text-cf-orange transition duration-150 font-medium">Video </a>
                    <a href="#design" class="text-gray-600 dark:text-gray-300 hover:text-cf-orange transition duration-150 font-medium">Guides</a>

                    <!-- Dark Mode Toggle Button -->
                    <button id="dark-mode-toggle" onclick="toggleDarkMode()" class="p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-150">
                        <i id="theme-icon" class="fas fa-sun w-5 h-5"></i>
                    </button>
                    
                    <!-- Mobile Menu Button (placeholder) -->
                    <button class="md:hidden p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-150">
                        <svg class="h-6 w-6 text-gray-600 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="lava-gradient section-padding text-white">
        <div class="max-w-7xl mx-auto text-center">
            <h1 class="text-4xl sm:text-6xl font-extrabold mb-4">Sharing Knowledge, Scaling Excellence.</h1>
            <p class="text-xl sm:text-2xl font-light opacity-90 max-w-3xl mx-auto">
                Discover reusable assets, guides, and prompts created by the PCX team to streamline your work and maintain a consistent user experience across the company.
            </p>
        </div>
    </section>

    <!-- Main Content Sections Container -->
    <main class="max-w-7xl mx-auto">

        <!-- CONTENT Section (PCX AI Prompts) - Now 3 Rows, Clickable Cards -->
        <section id="content" class="section-padding bg-white dark:bg-gray-900 transition-colors duration-300">
            <h2 class="text-3xl sm:text-4xl font-bold text-cf-orange mb-3 pb-1">PCX AI Prompts</h2>
            <p class="text-gray-500 dark:text-gray-400 mb-12 border-b-2 border-gray-200 dark:border-gray-700 pb-3">Click any prompt card below to open the full prompt text in a modal, where you can easily copy it with a single click.</p>

            <!-- Row 1 -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">

                <!-- Asset Card 1: CF1 AI Decisions -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700" 
                    onclick="showPromptModal(
                        'CF1 AI Decisions', 
                        'Act as a Content Strategist for a cloud security company. Review the following feature description for clarity, security focus, and tone. Suggest two alternative headlines. [INSERT FEATURE DESCRIPTION]'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">CF1 AI Decisions</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">A collection of validated prompts for rapid content generation, summarization, and tone-of-voice checks using the Gemini API.</p>
                </div>

                <!-- Asset Card 2: Core Dash AI Decisions (v3.1) -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'Core Dash AI Decisions (v3.1)', 
                        'Using the Cloudflare Product Style Guide (v3.1), rewrite the following error message to be polite, actionable, and avoid jargon. Original message: "A 503 error occurred due to an invalid configuration state." New message:'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Core Dash AI Decisions (v3.1)</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">The definitive guide for voice, tone, grammar, and terminology across all Cloudflare product interfaces and documentation.</p>
                </div>

                <!-- Asset Card 3: PCX Video Scripts -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'PCX Video Scripts', 
                        'Generate a 60-second animated video script explaining the benefits of Zero Trust to an audience of small business owners. Focus on simple analogies and use a friendly, educational tone. Script format should include: [SCENE], [VISUALS], [VOICEOVER].'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">PCX Video Scripts</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">Standardized spreadsheet and methodology for reviewing existing content and identifying areas for improvement or deprecation.</p>
                </div>

                <!-- Asset Card 4: Feature Naming Prompt -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'Feature Naming Prompt', 
                        'Suggest 5 potential names for a new Firewall feature that uses machine learning to detect anomalous traffic patterns. The names must be easy to remember, non-technical, and align with Cloudflare\'s brand guidelines. Provide a 1-sentence rationale for each.'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Feature Naming Prompt</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">A framework prompt to generate and evaluate new feature names based on clarity, memorability, and brand alignment.</p>
                </div>
            </div>

            <!-- Row 2 -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-8">

                <!-- Asset Card 5: Error Message Review (v3.1) -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'Error Message Review (v3.1)', 
                        'Apply the following system instructions to future outputs: "You are an empathetic UX writer. All error messages must offer a clear solution or next step, even if the user cannot fix it themselves." Rewrite: "Error 404: Resource Not Found."'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Error Message Review (v3.1)</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">The definitive prompt set for ensuring error messages are helpful, actionable, and adhere to our user-centric tone.</p>
                </div>

                <!-- Asset Card 6: API Documentation Summary -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'API Documentation Summary', 
                        'Summarize the following API documentation update into a release note aimed at developers. Highlight breaking changes and new methods. [INSERT API DOCS LINK/TEXT]'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">API Documentation Summary</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">A powerful prompt to summarize complex API changes into digestible release notes for general audiences.</p>
                </div>

                <!-- Asset Card 7: User Journey Mapping Prompt (New) -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'User Journey Mapping Prompt', 
                        'Identify the 5 core steps a new user takes when setting up a Worker. For each step, identify potential points of friction and suggest a content intervention (tooltip, success message, guide link).'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">User Journey Mapping Prompt</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">A guided prompt set to help define user personas, pain points, and success metrics for new feature adoption.</p>
                </div>

                <!-- Asset Card 8: Release Note Summary Prompt (New) -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'Release Note Summary Prompt', 
                        'Condense this technical documentation into a Twitter thread (5 tweets maximum) for a general audience. Focus on customer benefit rather than technical implementation details. [INSERT DOC TEXT]'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Release Note Summary Prompt</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">A system instruction to condense technical release notes into clear, customer-facing communications across different channels.</p>
                </div>
            </div>

            <!-- Row 3 (Contains only 1 card now) -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-8">

                <!-- Asset Card 9: Competitive Analysis Framework (New) -->
                <div class="bg-cf-light dark:bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 cursor-pointer hover:shadow-2xl dark:hover:shadow-gray-700"
                    onclick="showPromptModal(
                        'Competitive Analysis Framework', 
                        'Compare our product messaging regarding DDoS protection against competitors A and B. Analyze their use of fear, uncertainty, and doubt (FUD) versus our proactive, educational tone. Output a JSON array listing key differentiators.'
                    )">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Competitive Analysis Framework</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">A structured prompt to generate a comparative analysis of competitor messaging and identify our core differentiation.</p>
                </div>
            </div>
        </section>

        <!-- VIDEO Section (Reusable Video Assets) -->
        <section id="video" class="section-padding bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
            <h2 class="text-3xl sm:text-4xl font-bold text-cf-orange mb-3 pb-1">Reusable Video Assets</h2>
            <p class="text-gray-500 dark:text-gray-400 mb-12 border-b-2 border-gray-200 dark:border-gray-700 pb-3">Click any asset card to view the GIF preview and quickly copy the direct asset URL link from the modal.</p>

            <!-- Base URL for R2 assets -->
            <!-- Note: Assumes GIFs are named lowercase, hyphenated, e.g., 'loading-state.gif' -->

            <script>
                const R2_BASE_URL = 'https://2f3dc21d188ba781322b520bbde5fb5a.r2.cloudflarestorage.com/katiesharedassetsite';
            </script>

            <!-- Visible 4-Column Grid (Initial View) -->
            <div id="initial-assets-grid" class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-4 gap-4">
                <!-- Asset Card 1: Attacker Laptop -->
                <div class="bg-white p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 flex flex-col cursor-pointer"
                    onclick="showAssetModal('Attacker Laptop', R2_BASE_URL + 'PCXV Gifs/Attacker laptop.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Attacker%20laptop.gif')">
                    <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Attacker%20laptop.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Loading animation example gif">
                    <p class="text-xs font-semibold text-gray-700 mb-1 truncate">Attacker Laptop</p>
                </div>

                <!-- Asset Card 2: Bidirectional Arrow -->
                <div class="bg-white p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 flex flex-col cursor-pointer"
                    onclick="showAssetModal('Bidirectional Arrow', R2_BASE_URL + 'PCXV Gifs/Bidirectional arrow.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Bidirectional%20arrow.gif')">
                    <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Bidirectional%20arrow.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Button hover effect example gif">
                    <p class="text-xs font-semibold text-gray-700 mb-1 truncate">Button Hover</p>
                </div>

                <!-- Asset Card 3: CF Global Network -->
                <div class="bg-white p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 flex flex-col cursor-pointer"
                    onclick="showAssetModal('CF Global Network', R2_BASE_URL + 'PCXV Gifs/CF Global Network.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/CF%20Global%20Network.gif')">
                    <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/CF%20Global%20Network.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Header drop animation example gif">
                    <p class="text-xs font-semibold text-gray-700 mb-1 truncate">Header Drop</p>
                </div>

                <!-- Asset Card 4: Copy Button -->
                <div class="bg-white p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 flex flex-col cursor-pointer"
                    onclick="showAssetModal('Copy Button', R2_BASE_URL + 'PCXV Gifs/Copy button.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Copy%20button.gif')">
                    <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Copy%20button.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Success icon animation example gif">
                    <p class="text-xs font-semibold text-gray-700 mb-1 truncate">Success Icon</p>
                </div>
            </div>

            <!-- Toggle Button -->
            <div class="mt-8 text-center">
                <button id="toggle-button" onclick="toggleAssets()" class="inline-flex items-center px-6 py-3 bg-cf-orange text-white font-bold rounded-lg shadow-md hover:bg-opacity-90 transition duration-300">
                    <span id="toggle-text">Show 20 More Assets</span>
                    <svg id="toggle-icon" class="w-4 h-4 ml-2 transition-transform duration-300 transform rotate-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                </button>
            </div>

            <!-- Hidden 4x5 Grid (Initially Hidden) -->
            <div id="extra-assets-grid" class="hidden mt-8">
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                    <!-- Card 5: Let's Go Button -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Lets Go Button', R2_BASE_URL + 'PCXV Gifs/Lets go button.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Lets%20go%20button.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Lets%20go%20button.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Error shake animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Lets Go Button</p>
                    </div>
                    <!-- Card 6: Product Icon Display -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Product icon display', R2_BASE_URL + 'PCXV Gifs/Product icon display.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Product%20icon%20display.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Product%20icon%20display.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Toggle switch animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Product Icon Display</p>
                    </div>
                    <!-- Card 7: Search Bar -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Search Bar', R2_BASE_URL + 'PCXV Gifs/Search bar.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Search%20bar.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Search%20bar.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Progress bar animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Search Bar</p>
                    </div>
                    <!-- Card 8: Server transition -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('CF Warp', R2_BASE_URL + 'PCXV Gifs/Server transition.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Server%20transition.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/Server%20transition.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Cloudflare warp animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Server Transition</p>
                    </div>

                    <!-- Row 2 -->
                    <!-- Card 9: Laptop 1 -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Pulse Effect', R2_BASE_URL + 'PCXV Gifs/User laptop 1.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/User%20laptop%201.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/User%20laptop%201.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Pulse effect animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Laptop 1</p>
                    </div>
                    <!-- Card 10: Laptop 2 -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Pulse Effect', R2_BASE_URL + 'PCXV Gifs/User laptop 2.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/User%20laptop%202.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/User%20laptop%202.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Pulse effect animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Laptop 2</p>
                    </div>
                    <!-- Card 11: Laptop 3 -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Checkmark', R2_BASE_URL + 'PCXV Gifs/User laptop 3.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/User%20laptop%203.gifp')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/User%20laptop%203.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Checkmark reveal animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Laptop 3</p>
                    </div>
                    <!-- Card 12: World Spin Lines -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Cloud Swoosh', R2_BASE_URL + 'PCXV Gifs/World spin lines.gif', 'https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/World%20spin%20lines.gif')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/PCXV%20Gifs/World%20spin%20lines.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Cloud swoosh animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">World Spint Lines</p>
                    </div>

                    <!-- Row 3 -->
                    <!-- Card 13: Text Reveal -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Text Reveal', R2_BASE_URL + 'text-reveal.gif', 'https://mock-asset-link/text_reveal.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/text-reveal.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Text reveal animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Text Reveal</p>
                    </div>
                    <!-- Card 14: Map Pin -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Map Pin', R2_BASE_URL + 'map-pin.gif', 'https://mock-asset-link/map_pin.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/map-pin.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Map pin drop animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Map Pin</p>
                    </div>
                    <!-- Card 15: Server Wiggle -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Server Wiggle', R2_BASE_URL + 'server-wiggle.gif', 'https://mock-asset-link/server_wiggle.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/server-wiggle.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Server wiggle animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Server Wiggle</p>
                    </div>
                    <!-- Card 16: Data Flow -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Data Flow', R2_BASE_URL + 'data-flow.gif', 'https://mock-asset-link/data_flow.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/data-flow.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Data flow animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Data Flow</p>
                    </div>

                    <!-- Row 4 -->
                    <!-- Card 17: Alert Bounce -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Alert Bounce', R2_BASE_URL + 'alert-bounce.gif', 'https://mock-asset-link/alert_bounce.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/alert-bounce.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Alert bounce animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Alert Bounce</p>
                    </div>
                    <!-- Card 18: Key Rotate -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Key Rotate', R2_BASE_URL + 'key-rotate.gif', 'https://mock-asset-link/key_rotate.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/key-rotate.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Key rotate animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Key Rotate</p>
                    </div>
                    <!-- Card 19: Lock Toggle -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Lock Toggle', R2_BASE_URL + 'lock-toggle.gif', 'https://mock-asset-link/lock_toggle.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/lock-toggle.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Lock toggle animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Lock Toggle</p>
                    </div>
                    <!-- Card 20: Bar Chart -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Bar Chart', R2_BASE_URL + 'bar-chart.gif', 'https://mock-asset-link/bar_chart.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/bar-chart.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Bar chart animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Bar Chart</p>
                    </div>
                    
                    <!-- Row 5 -->
                    <!-- Card 21: Pie Chart -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Pie Chart', R2_BASE_URL + 'pie-chart.gif', 'https://mock-asset-link/pie_chart.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/pie-chart.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Pie chart animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Pie Chart</p>
                    </div>
                    <!-- Card 22: Settings Spin -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Settings Spin', R2_BASE_URL + 'settings-spin.gif', 'https://mock-asset-link/settings_spin.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/settings-spin.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Settings spin animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Settings Spin</p>
                    </div>
                    <!-- Card 23: Warning Flash -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Warning Flash', R2_BASE_URL + 'warning-flash.gif', 'https://mock-asset-link/warning_flash.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/warning-flash.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Warning flash animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Warning Flash</p>
                    </div>
                    <!-- Card 24: Shield Appear -->
                    <div class="bg-white dark:bg-gray-800 p-2 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-700 flex flex-col cursor-pointer"
                        onclick="showAssetModal('Shield Appear', R2_BASE_URL + 'shield-appear.gif', 'https://mock-asset-link/shield_appear.aep')">
                        <img src="https://pub-aa908c10829e4ed6b353da031aeb7c2b.r2.dev/shield-appear.gif" class="w-full h-24 object-cover rounded-md mb-2" alt="Shield appear animation example gif">
                        <p class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1 truncate">Shield Appear</p>
                    </div>
                </div>
            </div>

            <!-- Guidance Link (Always visible) -->
            <div class="mt-8 text-center" id="guidance-link-container">
                <a href="#" class="inline-block text-gray-600 dark:text-gray-400 font-medium hover:text-cf-orange transition duration-150 text-sm border-b border-gray-400 dark:border-gray-600 pb-1">
                    Need guidance? View Video Team Wiki &rarr;
                </a>
            </div>
        </section>

        <!-- DESIGN Section (Content Strategy Guides) -->
        <section id="design" class="section-padding bg-white dark:bg-gray-800 transition-colors duration-300">
            <h2 class="text-3xl sm:text-4xl font-bold text-cf-orange mb-3 pb-1">Content Strategy Guides</h2>
            <p class="text-gray-500 dark:text-gray-400 mb-12 border-b-2 border-gray-200 dark:border-gray-700 pb-3">These cards contain permanent links to our evergreen style guides, Figma components, and reference documentation. Click a link within a card to view the asset.</p>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- NEW CARD: PCX-Built Tools (FIRST POSITION) -->
                <div class="bg-cf-light dark:bg-gray-700 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-600">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">PCX-Built Tools</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">Internal apps and specialized tools created by PCX to automate audits, content checks, and accessibility compliance.</p>
                    <ul class="text-gray-600 dark:text-gray-300 space-y-2 text-sm">
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Automated Link Checker &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Tone-of-Voice Audit App &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Taxonomy Validator &rarr;
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Asset Card 6: Strategy Resources (UPDATED) (SECOND POSITION) -->
                <div class="bg-cf-light dark:bg-gray-700 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-600">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Content Strategies</h3>
                    <ul class="text-gray-600 dark:text-gray-300 space-y-2 text-sm">
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Components Library (Figma) &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Color Tokens Reference &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Typography Styles &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Interaction Patterns Guide &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Desktop Layout Templates &rarr;
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Asset Card 7: Grammer & Word Choice (THIRD POSITION) -->
                <div class="bg-cf-light dark:bg-gray-700 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-600">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Grammer & Word Choices</h3>
                    <ul class="text-gray-600 dark:text-gray-300 space-y-2 text-sm">
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Components Library (Figma) &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Color Tokens Reference &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Typography Styles &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Interaction Patterns Guide &rarr;
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-cf-orange font-medium hover:underline flex items-center">
                                Desktop Layout Templates &rarr;
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- Cloudflare Brand Guides (Now wraps to next line on desktop) -->
                <div class="bg-cf-light dark:bg-gray-700 p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border border-gray-100 dark:border-gray-600">
                    <h3 class="text-2xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Branding assets</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">Access to the approved set of Phosphor and custom-designed icons for product interfaces and illustrations.</p>
                    <a href="#" class="mt-4 inline-block text-cf-orange font-medium hover:underline text-sm">Browse Icon Library &rarr;</a>
                </div>
            </div>
        </section>

        <!-- METRICS Section (Real-Time Counters) -->
        <section id="metrics" class="section-padding bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
            <h2 class="text-3xl sm:text-4xl font-bold text-gray-700 dark:text-gray-200 mb-12 border-b-2 border-gray-300 dark:border-gray-700 pb-3">Usage Metrics (Real-Time)</h2>

            <div class="grid md:grid-cols-3 gap-8">
                
                <!-- Card 1: Prompts Copied -->
                <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 text-center">
                    <p class="text-5xl font-extrabold text-cf-orange" id="metric-prompts-copied">0</p>
                    <p class="mt-2 text-lg font-semibold text-gray-700 dark:text-gray-200">AI Prompts Copied</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Total utility of content strategies.</p>
                </div>

                <!-- Card 2: Videos Copied -->
                <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 text-center">
                    <p class="text-5xl font-extrabold text-cf-orange" id="metric-videos-copied">0</p>
                    <p class="mt-2 text-lg font-semibold text-gray-700 dark:text-gray-200">Video Assets Copied</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Total reuse of motion graphics.</p>
                </div>

                <!-- Card 3: Page Views -->
                <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 text-center">
                    <p class="text-5xl font-extrabold text-cf-orange" id="metric-page-views">0</p>
                    <p class="mt-2 text-lg font-semibold text-gray-700 dark:text-gray-200">Total Site Views</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Overall exposure of shared assets.</p>
                </div>
            </div>
        </section>
       
    </main>

    <!-- PROMPT MODAL STRUCTURE -->
    <div id="prompt-modal" class="modal-backdrop hidden" onclick="if (event.target.id === 'prompt-modal') closeModal()">
        <div class="bg-white dark:bg-gray-800 w-11/12 md:w-3/4 lg:w-1/2 p-6 rounded-2xl shadow-2xl relative">
            
            <!-- Modal Header -->
            <div class="flex justify-between items-start mb-4 border-b pb-3 border-gray-200 dark:border-gray-700">
                <h3 id="modal-title" class="text-2xl font-bold text-gray-900 dark:text-gray-100 truncate">Prompt Title</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Scrollable Prompt Text Area -->
            <div class="relative h-64 md:h-80 mb-4">
                <textarea id="modal-prompt-text" readonly 
                          class="w-full h-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-cf-orange bg-gray-50 dark:bg-gray-900 overflow-y-scroll"
                          placeholder="Loading prompt content...">
                </textarea>
            </div>

            <!-- Copy Button -->
            <div class="flex justify-end">
                <button id="copy-modal-button" onclick="copyModalContent(this)" class="inline-flex items-center px-4 py-2 bg-cf-orange text-white font-medium rounded-lg shadow-md hover:opacity-90 transition duration-300">
                    <i class="fas fa-copy mr-2"></i>
                    Copy Prompt
                </button>
            </div>

        </div>
    </div>
    <!-- END PROMPT MODAL STRUCTURE -->

    <!-- ASSET MODAL STRUCTURE (for Video/Design Assets) -->
    <div id="asset-modal" class="modal-backdrop hidden" onclick="if (event.target.id === 'asset-modal') closeAssetModal()">
        <div class="bg-white dark:bg-gray-800 w-11/12 md:w-3/4 lg:w-1/3 p-6 rounded-2xl shadow-2xl relative">
            
            <!-- Modal Header/Title -->
            <div class="flex justify-between items-start mb-4 border-b pb-3 border-gray-200 dark:border-gray-700">
                <h3 id="asset-modal-title" class="text-2xl font-bold text-gray-900 dark:text-gray-100 truncate">Asset Title</h3>
                <button onclick="closeAssetModal()" class="text-gray-500 hover:text-gray-900 dark:hover:text-gray-100 transition-colors p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Asset Display and Copyable Link -->
            <div class="mb-4">
                <img id="asset-modal-image" src="https://2f3dc21d188ba781322b520bbde5fb5a.r2.cloudflarestorage.com/katiesharedassetsite" class="w-full h-auto object-cover rounded-lg mb-4 shadow-md" alt="Asset Preview">
                
                <p class="text-gray-600 dark:text-gray-300 mb-2 text-sm font-semibold">Asset URL:</p>
                <textarea id="asset-modal-url-display" readonly 
                          class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-mono text-xs resize-none focus:outline-none focus:ring-2 focus:ring-cf-orange bg-gray-50 dark:bg-gray-900 h-10 overflow-hidden"
                          rows="1" placeholder="URL will appear here.">
                </textarea>
            </div>

            <!-- Copy Button (Asset) -->
            <div class="flex justify-end">
                <button id="copy-asset-modal-button" onclick="copyAssetModalContent(this)" class="inline-flex items-center px-4 py-2 bg-cf-orange text-white font-medium rounded-lg shadow-md hover:opacity-90 transition duration-300">
                    <i class="fas fa-copy mr-2"></i>
                    Copy Asset URL
                </button>
            </div>

        </div>
    </div>
    <!-- END ASSET MODAL STRUCTURE -->


    <!-- JavaScript for Interactions and Firebase (Unified Module) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, setDoc, updateDoc, increment, getDoc, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- DARK MODE LOGIC START ---
        
        // Function to set the icon on load or toggle
        function updateThemeIcon(isDark) {
            const icon = document.getElementById('theme-icon');
            if (icon) {
                icon.classList.remove('fa-sun', 'fa-moon');
                icon.classList.add(isDark ? 'fa-sun' : 'fa-moon');
            }
        }
        
        // Initial icon setup (runs once after DOM is loaded)
        document.addEventListener('DOMContentLoaded', () => {
            const isDark = document.documentElement.classList.contains('dark');
            updateThemeIcon(isDark);
        });

        // Toggle function exposed to the global scope
        window.toggleDarkMode = function() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark');
            
            updateThemeIcon(isDark);

            if (isDark) {
                localStorage.theme = 'dark';
            } else {
                localStorage.theme = 'light';
            }
        }
        // --- DARK MODE LOGIC END ---


        // Global Firebase variables accessible within this module
        let app;
        let db;
        let auth;
        let userId;
        let isFirebaseReady = false;

        // Constants for Firebase Configuration
        // Accessing globals via window object to prevent potential SyntaxErrors inside module scope
        const appId = window.__app_id || 'default-app-id';
        let firebaseConfig = {};
        try {
            const configString = window.__firebase_config || '{}';
            firebaseConfig = JSON.parse(configString);
        } catch (e) {
            console.error("Error parsing __firebase_config:", e);
        }
        const initialAuthToken = window.__initial_auth_token || null;

        const METRICS_DOC_PATH = `artifacts/${appId}/public/data/metrics/analytics`;

        // --- FIREBASE INITIALIZATION & AUTHENTICATION ---
        async function initializeFirebase() {
            setLogLevel('Debug');
            if (Object.keys(firebaseConfig).length === 0) {
                console.error("Firebase configuration is empty. Metrics will not function.");
                return;
            }

            try {
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Wait for auth state to be confirmed
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        isFirebaseReady = true;
                        console.log("Firebase initialized. User ID:", userId);
                        setupMetricsTracking();
                    } else {
                        // Fallback if anonymous sign-in fails
                        userId = crypto.randomUUID();
                        console.error("Firebase auth failed, using random UUID for userId:", userId);
                        setupMetricsTracking();
                    }
                });
            } catch (error) {
                console.error("Error initializing Firebase:", error);
            }
        }

        // --- FIREBASE METRICS LOGIC ---
        function getAnalyticsDocRef() {
            if (!db) return null;
            return doc(db, METRICS_DOC_PATH);
        }

        async function incrementCounter(field) {
            const docRef = getAnalyticsDocRef();
            if (!docRef || !isFirebaseReady) {
                console.error("Firestore not ready or auth pending for increment.");
                return;
            }

            try {
                // Check if the document exists first
                const docSnap = await getDoc(docRef);
                if (!docSnap.exists()) {
                    // Initialize the document with default values
                    await setDoc(docRef, {
                        page_views: 0,
                        prompts_copied: 0,
                        videos_copied: 0
                    });
                }
                
                // Perform the increment
                await updateDoc(docRef, { [field]: increment(1) });
                console.log(`Successfully incremented ${field}`);
            } catch (error) {
                console.error(`Error incrementing ${field}:`, error);
            }
        }

        function setupMetricsTracking() {
            const docRef = getAnalyticsDocRef();
            if (!docRef) {
                console.error("Metrics setup aborted: Firestore not ready.");
                return;
            }
            
            // 1. Increment Page Views immediately
            incrementCounter('page_views');

            // 2. Set up Real-time listener for all three metrics
            onSnapshot(docRef, (doc) => {
                if (doc.exists()) {
                    const data = doc.data();
                    document.getElementById('metric-page-views').textContent = data.page_views || 0;
                    document.getElementById('metric-prompts-copied').textContent = data.prompts_copied || 0;
                    document.getElementById('metric-videos-copied').textContent = data.videos_copied || 0;
                } else {
                    // Document doesn't exist yet, display 0s
                    document.getElementById('metric-page-views').textContent = '0';
                    document.getElementById('metric-prompts-copied').textContent = '0';
                    document.getElementById('metric-videos-copied').textContent = '0';
                }
            }, (error) => {
                console.error("Error listening to metrics:", error);
                document.getElementById('metric-page-views').textContent = 'ERROR';
            });
        }

        // --- UTILITY/MODAL FUNCTIONS (Made globally accessible by attaching to window) ---

        // Function to open the prompt modal and load content
        window.showPromptModal = function(title, promptText) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-prompt-text').value = promptText;
            document.getElementById('prompt-modal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden'); // Prevent background scrolling
        }

        // Function to close the prompt modal
        window.closeModal = function() {
            document.getElementById('prompt-modal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            // Reset button state just in case
            const button = document.getElementById('copy-modal-button');
            button.innerHTML = '<i class="fas fa-copy mr-2"></i>Copy Prompt';
            button.classList.remove('bg-green-600');
            button.classList.add('bg-cf-orange');
        }

        // Function to copy the prompt modal content and track metric
        window.copyModalContent = function(button) {
            const textarea = document.getElementById('modal-prompt-text');
            
            textarea.select();
            textarea.setSelectionRange(0, 99999); 

            document.execCommand('copy');
            
            // Increment the prompt copy counter
            incrementCounter('prompts_copied'); 

            // Provide visual feedback
            const originalHTML = button.innerHTML;

            button.innerHTML = '<i class="fas fa-check-circle mr-2"></i>Copied! ✅';
            button.classList.remove('bg-cf-orange');
            button.classList.add('bg-green-600');
            button.disabled = true;

            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.classList.remove('bg-green-600');
                button.classList.add('bg-cf-orange');
                button.disabled = false;
            }, 1500);
        }
        
        // --- ASSET MODAL FUNCTIONS ---
        window.showAssetModal = function(title, imageUrl, assetUrl) {
            document.getElementById('asset-modal-title').textContent = title;
            document.getElementById('asset-modal-image').src = imageUrl;
            document.getElementById('asset-modal-url-display').value = assetUrl;
            document.getElementById('asset-modal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
            
            const button = document.getElementById('copy-asset-modal-button');
            button.innerHTML = '<i class="fas fa-copy mr-2"></i>Copy Asset URL';
            button.classList.remove('bg-green-600');
            button.classList.add('bg-cf-orange');
            button.disabled = false;
        }

        window.closeAssetModal = function() {
            document.getElementById('asset-modal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }

        // Function to copy asset URL and track metric
        window.copyAssetModalContent = function(button) {
            const textarea = document.getElementById('asset-modal-url-display');
            
            textarea.select();
            textarea.setSelectionRange(0, 99999);

            document.execCommand('copy');
            
            // Increment the video copy counter
            incrementCounter('videos_copied'); 

            const originalHTML = button.innerHTML;

            button.innerHTML = '<i class="fas fa-check-circle mr-2"></i>Copied! ✅';
            button.classList.remove('bg-cf-orange');
            button.classList.add('bg-green-600');
            button.disabled = true;

            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.classList.remove('bg-green-600');
                button.classList.add('bg-cf-orange');
                button.disabled = false;
            }, 1500);
        }

        // --- TOGGLE FUNCTION ---
        window.toggleAssets = function() {
            const extraAssetsGrid = document.getElementById('extra-assets-grid');
            const toggleButton = document.getElementById('toggle-button');
            const toggleText = document.getElementById('toggle-text');
            const toggleIcon = document.getElementById('toggle-icon');

            if (extraAssetsGrid.classList.contains('hidden')) {
                extraAssetsGrid.classList.remove('hidden');
                toggleText.textContent = 'Show Fewer Assets';
                toggleIcon.classList.add('rotate-180');
            } else {
                extraAssetsGrid.classList.add('hidden');
                toggleText.textContent = 'Show 20 More Assets';
                toggleIcon.classList.remove('rotate-180');
            }
        }
        
        // Initialize Firebase on window load
        window.onload = initializeFirebase;
    </script>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-6 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400">
            &copy; 2025 PCX Content Strategy Team. All Rights Reserved.
        </div>
    </footer>

</body>
</html>
